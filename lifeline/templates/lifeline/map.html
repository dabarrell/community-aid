{% extends "lifeline/base.html" %}

{% block head %}
<style>
  /* Always set the map height explicitly to define the size of the div
   * element that contains the map. */
  #map {
    height: 700px;
		width: 1000px;
  }
</style>
{% endblock %}

{% block content %}

<div id="map"></div>

<script>
  function initMap() {
    var map = new google.maps.Map(document.getElementById('map'), {
      center: {lat: -37.8001998, lng: 144.9641445},
      zoom: 11
    });

    {% for item in items %}
      {% if item.item_longitude %}
        var pos = {
          lat: {{ item.item_latitude }},
          lng: {{ item.item_longitude }}
        };

        var marker = new google.maps.Marker({
          position: pos,
          map: map,
          url: 'http://www.google.com/',
          title: "{{ item.item_name }}"
        });
      {% endif %}
    {% endfor %}


  }

  function handleLocationError(browserHasGeolocation, map) {
    var infoWindow = new google.maps.InfoWindow({map: map});
    infoWindow.setPosition(map.getCenter());
    infoWindow.setContent(browserHasGeolocation ?
                          'Error: The Geolocation service failed.' :
                          'Error: Your browser doesn\'t support geolocation.');
  }
</script>
<script async defer
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDMxdAEW3O9Ik80TCxcZ3QXQgHSsIuFXPg&callback=initMap">
</script>

{% endblock %}
